//Heroku doesn't have automatic variable insertion so we generate the environment config file from the system env vars

const fs = require('fs');
const path = require('path');

var output = '/// <reference types="node" />\n\
console.log(process)\n\
export const environment = {\n\
  production: true,\n\
  maps_api_key: \'' + (process.env.maps_api_key || 'no_maps_api_key') + '\',\n\
  api_url: \'https://malware-visualization.herokuapp.com\'\n\
};\n'

fs.writeFileSync(path.join(__dirname, '/src/environments/environment.prod.ts'), output);

process.exit(0);